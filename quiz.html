<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="dashboard-container">
    <header class="dashboard-header">
      <h1>Quiz</h1>
      <nav class="dashboard-nav">
        <a href="#">About Us</a>
        <a href="#" onclick="logout()">Logout</a>
      </nav>
    </header>
    <div class="dashboard-content">
      <aside class="dashboard-sidebar">
        <ul>
          <li><a href="https://inclu-acao-front.vercel.app/dashboard.html">Dashboard</a></li>
          <li><a href="https://inclu-acao-front.vercel.app/aulas.html">Aulas sobre diversidade</a></li>
        </ul>
      </aside>
      <main class="dashboard-main">
        <h2>Quiz</h2>
        <form id="quiz-form">
          <div class="quiz-section">
            <h3>Introdução</h3>
            <div class="quiz-question">
              <p>Pergunta 1) Quais termos são definidos no glossário LGBTQIAP+?</p>
              <label><input type="radio" name="q1" value="A"> A) Identidade de gênero e expressão de gênero</label><br>
              <label><input type="radio" name="q1" value="B"> B) Lésbica, gay, bissexual, transexual, queer, intersexual, assexual, pansexual e outros</label><br>
              <label><input type="radio" name="q1" value="C"> C) Orientação sexual, atração afetiva e orientação romântica</label><br>
              <label><input type="radio" name="q1" value="D"> D) Igualdade, não discriminação e pequenas ações cotidianas</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 2) A a que Fatores a identidade de gênero está associada?</p>
              <label><input type="radio" name="q2" value="A"> A) Fatores biológicos</label><br>
              <label><input type="radio" name="q2" value="B"> B) Fatores psicológicos</label><br>
              <label><input type="radio" name="q2" value="C"> C) Fatores sociais, culturais e históricos</label><br>
              <label><input type="radio" name="q2" value="D"> D) Fatores espirituais</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 3) O que é orientação sexual de acordo com o texto?</p>
              <label><input type="radio" name="q3" value="A"> A) Como a pessoa se identifica</label><br>
              <label><input type="radio" name="q3" value="B"> B) Atração afetiva e/ou sexual por gêneros</label><br>
              <label><input type="radio" name="q3" value="C"> C) Identidade social percebida</label><br>
              <label><input type="radio" name="q3" value="D"> D) Forma de se expressar publicamente</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 4) Após a conclusão do curso, poderia indicar qual foi o seu objetivo principal?</p>
              <label><input type="radio" name="q4" value="A"> A) Falar sobre a importância do letramento na diversidade LGBTQIAP+</label><br>
              <label><input type="radio" name="q4" value="B"> B) Apresentar conceitos sobre identidade e expressão de gênero</label><br>
              <label><input type="radio" name="q4" value="C"> C) Discutir políticas de inclusão e combate à discriminação</label><br>
              <label><input type="radio" name="q4" value="D"> D) Abordar os desafios na promoção dos direitos LGBTQIAP+</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 5) De acordo com o curso, como se define o termo "transgênero" no glossário?</p>
              <label><input type="radio" name="q5" value="A"> A) Indivíduo que não se identifica com o gênero atribuído ao nascer</label><br>
              <label><input type="radio" name="q5" value="B"> B) Mulher que sente atração por outras mulheres</label><br>
              <label><input type="radio" name="q5" value="C"> C) Homem que sente atração por outros homens</label><br>
              <label><input type="radio" name="q5" value="D"> D) Pessoa que se relaciona com ambos os gêneros</label>
            </div>
          </div>
          <div class="quiz-section">
            <h3>Normas de convivência</h3>
            <div class="quiz-question">
              <p>Pergunta 1) De acordo com o curso, qual a finalidade da abordagem das normas de convivência?</p>
              <label><input type="radio" name="q6" value="A"> A) Criar um ambiente diverso de trabalho</label><br>
              <label><input type="radio" name="q6" value="B"> B) Promover mudanças reais com vistas à inclusão</label><br>
              <label><input type="radio" name="q6" value="C"> C) Apenas esclarecer conceitos sobre o tema</label><br>
              <label><input type="radio" name="q6" value="D"> D) Gerar polêmicas sobre orientações sexuais</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 2) Segundo a palestra, como deve ser utilizado o termo "opção sexual"?</p>
              <label><input type="radio" name="q7" value="A"> A) É o termo correto para se referir à orientação sexual</label><br>
              <label><input type="radio" name="q7" value="B"> B) Não é correto usá-lo, pois não se trata de uma escolha</label><br>
              <label><input type="radio" name="q7" value="C"> C) Pode ser usado indistintamente do termo "orientação sexual"</label><br>
              <label><input type="radio" name="q7" value="D"> D) Deve ser empregado apenas para referir-se à bissexualidade</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 3) De acordo com a aula, qual a principal preocupação ligada à discriminação velada?</p>
              <label><input type="radio" name="q8" value="A"> A) Viés inconscientes que precisam ser combatidos</label><br>
              <label><input type="radio" name="q8" value="B"> B) Rejeição social percebida no ambiente de trabalho</label><br>
              <label><input type="radio" name="q8" value="C"> C) Manifestações explícitas de preconceito</label><br>
              <label><input type="radio" name="q8" value="D"> D) receio de represálias por denúncias</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 4) De acordo com as normas citadas, como deve ser tratado o nome das pessoas trans?</p>
              <label><input type="radio" name="q9" value="A"> A) Pode-se utilizar o nome de batismo</label><br>
              <label><input type="radio" name="q9" value="B"> B) Deve-se respeitar o nome social</label><br>
              <label><input type="radio" name="q9" value="C"> C) Só vale o nome do registro civil</label><br>
              <label><input type="radio" name="q9" value="D"> Nenhuma das alternativas está correta</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 5) Segundo o curso, como deve ser utilizado o termo "homossexualismo"?</p>
              <label><input type="radio" name="q10" value="A"> A) É o termo correto para se referir à orientação sexual</label><br>
              <label><input type="radio" name="q10" value="B"> B) Não deve ser utilizado, pois denota doença</label><br>
              <label><input type="radio" name="q10" value="C"> C) Pode ser usado indistintamente de "orientação sexual"</label><br>
              <label><input type="radio" name="q10" value="D"> Deve ser empregado apenas para referir a lésbicas</label>
            </div>
          </div>
          <div class="quiz-section">
            <h3>Legislação brasileira</h3>
            <div class="quiz-question">
              <p>Pergunta 1) De acordo com o módulo, a LGBTfobia pode se manifestar de que maneiras?</p>
              <label><input type="radio" name="q11" value="A"> A) Apenas em atitudes hostis e agressivas</label><br>
              <label><input type="radio" name="q11" value="B"> B) Apenas em formas sutis de discriminação</label><br>
              <label><input type="radio" name="q11" value="C"> C) Somente em políticas e práticas institucionais excludentes</label><br>
              <label><input type="radio" name="q11" value="D"> D) De diversas formas, incluindo as citadas nas alternativas anteriores</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 2) Qual o objetivo principal das leis citadas, segundo o texto?</p>
              <label><input type="radio" name="q12" value="A"> A) Criminalizar a homofobia e transfobia</label><br>
              <label><input type="radio" name="q12" value="B"> B) Proteger os direitos da população</label><br>
              <label><input type="radio" name="q12" value="C"> C) Assegurar ambiente de trabalho inclusivo</label><br>
              <label><input type="radio" name="q12" value="D"> D) Desconstruir o preconceito na sociedade</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 3) Segundo a aula, qual instituição proibiu as "curas gay"?</p>
              <label><input type="radio" name="q13" value="A"> A) Supremo Tribunal Federal</label><br>
              <label><input type="radio" name="q13" value="B"> B) Conselho Nacional de Justiça</label><br>
              <label><input type="radio" name="q13" value="C"> C) Conselho Federal de Psicologia</label><br>
              <label><input type="radio" name="q13" value="D"> D) Sistema Único de Saúde – SUS</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 4) Levando em consideração ao quanto exposto, a LGBTfobia engloba TODAS as alternativas, exceto:</p>
              <label><input type="radio" name="q14" value="A"> A) Exclusão social</label><br>
              <label><input type="radio" name="q14" value="B"> B) Reconhecimento de direitos</label><br>
              <label><input type="radio" name="q14" value="C"> C) Comentários pejorativos</label><br>
              <label><input type="radio" name="q14" value="D"> D) Agressões verbais</label>
            </div>
            <div class="quiz-question">
              <p>Pergunta 5) Conforme estudado, o STF decidiu equiparar a homofobia e transfobia a:</p>
              <label><input type="radio" name="q15" value="A"> A) Racismo</label><br>
              <label><input type="radio" name="q15" value="B"> B) Crimes sexuais</label><br>
              <label><input type="radio" name="q15" value="C"> C) Tortura</label><br>
              <label><input type="radio" name="q15" value="D"> D) Assédio moral</label>
            </div>
          </div>
          <button type="button" onclick="submitQuiz()">Submit</button>
        </form>
        <div id="quiz-result"></div>
      </main>
    </div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDfSd3zbl4iOT_Dw3RA0nk4HVo1SrUcCsc",
      authDomain: "incluacao-fb776.firebaseapp.com",
      projectId: "incluacao-fb776",
      storageBucket: "incluacao-fb776.appspot.com",
      messagingSenderId: "198502388108",
      appId: "1:198502388108:web:bd387b9504810af7d586a9"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    window.logout = function() {
      auth.signOut().then(() => {
        alert('Logout successful');
        window.location.href = 'index.html';
      }).catch((error) => {
        alert('Error: ' + error.message);
      });
    }

    window.submitQuiz = async function() {
      const quizForm = document.getElementById('quiz-form');
      const formData = new FormData(quizForm);
      const answers = {
        q1: 'B',
        q2: 'C',
        q3: 'B',
        q4: 'A',
        q5: 'A',
        q6: 'B',
        q7: 'B',
        q8: 'A',
        q9: 'B',
        q10: 'B',
        q11: 'D',
        q12: 'C',
        q13: 'C',
        q14: 'B',
        q15: 'A',
      };

      let score = 0;
      const totalQuestions = Object.keys(answers).length;
      for (const [question, correctAnswer] of Object.entries(answers)) {
        if (formData.get(question) === correctAnswer) {
          score++;
        }
      }

      const resultDiv = document.getElementById('quiz-result');
      const scorePercentage = score / totalQuestions;
      resultDiv.innerHTML = `Você acertou ${score} questões de ${totalQuestions}`;

      const user = auth.currentUser;
      if (user) {
        try {
          const response = await fetch('https://inclu-acao-back.vercel.app/updateQuizStatus', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'permissions-policy': 'compute-pressure=0.02, document-domain="https://inclu-acao-back.vercel.app", interest-cohort=()',
              'Access-Control-Allow-Origin': '*', // Required for CORS support to work
            },
            body: JSON.stringify({
              uid: user.uid,
              score: scorePercentage
            })
          });

          const result = await response.json();
          console.log('Quiz status update result:', result);
        } catch (error) {
          console.error('Error updating quiz status:', error);
        }
      }
    }
  </script>
</body>
</html>
